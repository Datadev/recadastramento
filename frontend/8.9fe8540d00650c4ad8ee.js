(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jotI:function(t,a,i){"use strict";i.r(a),i.d(a,"CampanhaModule",function(){return nt});var e=i("ofXK"),r=i("YUcS"),c=i("FKr1"),o=i("3Pt+"),n=i("tyNb"),s=i("3S9H"),m=i("w4NO"),b=i("fXoL"),l=i("sksZ"),u=i("bTqV"),d=i("NFeN"),f=i("Wp6s"),h=i("XiUz"),p=i("kmnG"),v=i("qFsG"),g=i("d3UM"),C=i("iadO");function S(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Informe a descri\xe7\xe3o da campanha"),b.Tb())}function D(t,a){if(1&t&&(b.Ub(0,"mat-option",24),b.Cc(1),b.Tb()),2&t){const t=a.$implicit;b.mc("value",t.chave),b.Db(1),b.Ec(" ",t.valor," ")}}function U(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Selecione algum m\xeas"),b.Tb())}function T(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Data inicial inv\xe1lida"),b.Tb())}function w(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Informe a data inicial"),b.Tb())}function x(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Data final inv\xe1lida"),b.Tb())}function y(t,a){1&t&&(b.Ub(0,"mat-error"),b.Cc(1,"Informe a data final"),b.Tb())}function I(t,a){if(1&t&&(b.Ub(0,"mat-option",24),b.Cc(1),b.Tb()),2&t){const t=a.$implicit;b.mc("value",t.chave),b.Db(1),b.Ec(" ",t.valor," ")}}function O(t,a){if(1&t){const t=b.Vb();b.Ub(0,"form",4),b.Ub(1,"div",5),b.Ub(2,"div",6),b.Ub(3,"mat-form-field",7),b.Pb(4,"input",8),b.Bc(5,S,2,0,"mat-error",9),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",5),b.Ub(7,"div",6),b.Ub(8,"mat-form-field",7),b.Ub(9,"mat-label"),b.Cc(10,"M\xeas de anivers\xe1rio"),b.Tb(),b.Ub(11,"mat-select",10),b.Bc(12,D,2,2,"mat-option",11),b.Tb(),b.Bc(13,U,2,0,"mat-error",9),b.Tb(),b.Tb(),b.Tb(),b.Ub(14,"div",5),b.Ub(15,"div",12),b.Ub(16,"mat-form-field",13),b.Ub(17,"mat-label"),b.Cc(18,"Per\xedodo"),b.Tb(),b.Ub(19,"mat-date-range-input",14),b.Pb(20,"input",15),b.Pb(21,"input",16),b.Tb(),b.Pb(22,"mat-datepicker-toggle",17),b.Pb(23,"mat-date-range-picker",null,18),b.Bc(25,T,2,0,"mat-error",9),b.Bc(26,w,2,0,"mat-error",9),b.Bc(27,x,2,0,"mat-error",9),b.Bc(28,y,2,0,"mat-error",9),b.Tb(),b.Tb(),b.Ub(29,"div",19),b.Ub(30,"mat-form-field",7),b.Ub(31,"mat-label"),b.Cc(32,"Ativa"),b.Tb(),b.Ub(33,"mat-select",20),b.Ub(34,"mat-option",21),b.Cc(35,"Selecione"),b.Tb(),b.Bc(36,I,2,2,"mat-option",11),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(37,"div",22),b.Ub(38,"button",23),b.cc("click",function(){return b.uc(t),b.gc(2).onSubmit()}),b.Cc(39,"Enviar"),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.sc(24),a=b.gc().ngIf,i=b.gc();b.mc("formGroup",i.formulario),b.Db(5),b.mc("ngIf",null==i.f.descricao.errors?null:i.f.descricao.errors.required),b.Db(7),b.mc("ngForOf",a.meses),b.Db(1),b.mc("ngIf",null==i.f.meses.errors?null:i.f.meses.errors.required),b.Db(6),b.mc("rangePicker",t),b.Db(3),b.mc("for",t),b.Db(3),b.mc("ngIf",null==i.f.inicio.errors?null:i.f.inicio.errors.matStartDateInvalid),b.Db(1),b.mc("ngIf",null==i.f.inicio.errors?null:i.f.inicio.errors.required),b.Db(1),b.mc("ngIf",null==i.f.fim.errors?null:i.f.fim.errors.matEndDateInvalid),b.Db(1),b.mc("ngIf",null==i.f.fim.errors?null:i.f.fim.errors.required),b.Db(8),b.mc("ngForOf",a.simnao),b.Db(2),b.mc("disabled",i.formulario.invalid)}}const B=function(){return["/campanhas"]};function k(t,a){if(1&t&&(b.Ub(0,"div",1),b.Ub(1,"h2"),b.Ub(2,"button",2),b.Ub(3,"mat-icon"),b.Cc(4,"chevron_left"),b.Tb(),b.Cc(5," Voltar "),b.Tb(),b.Cc(6),b.Tb(),b.Ub(7,"mat-card"),b.Ub(8,"mat-card-content"),b.Bc(9,O,40,12,"form",3),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc();b.Db(2),b.mc("routerLink",b.oc(3,B)),b.Db(4),b.Ec(" ",t.titulo," "),b.Db(3),b.mc("ngIf",t.formulario)}}let P=(()=>{class t{constructor(t,a,i,e,r,c,o){this.campanhaService=t,this.configService=a,this.dialogoService=i,this.formBuilder=e,this.notificacaoService=r,this.route=c,this.router=o,this.config$=this.configService.getConfigList()}ngOnInit(){this.id=this.route.snapshot.params.id,this.titulo=void 0===this.id?"Nova campanha":"Campanha",void 0!==this.id?this.campanhaService.buscarPorId(this.id).subscribe(t=>{this.campanha=t,this.criarFormulario()}):this.criarFormulario()}onSubmit(){void 0===this.id?this.campanhaService.criar(this.formulario.value).subscribe({next:t=>{this.dialogoService.informarSucesso("Campanha",t.mensagem).subscribe(()=>{this.router.navigate(["campanhas/"+t.id])})},error:t=>{this.notificacaoService.erro(t)}}):this.campanhaService.alterarPorId(this.id,this.formulario.value).subscribe({next:t=>{this.dialogoService.informarSucesso("Campanha","Campanha atualizada").subscribe(()=>{this.router.navigate(["campanhas/"+t.id])})},error:t=>{this.notificacaoService.erro(t)}})}get f(){return this.formulario.controls}criarFormulario(){this.formulario=this.formBuilder.group({descricao:[void 0!==this.id?this.campanha.descricao:"",o.t.required],meses:[void 0!==this.id?this.campanha.meses.map(t=>t.mes):"",o.t.required],inicio:[void 0!==this.id?this.campanha.inicio:"",o.t.required],fim:[void 0!==this.id?this.campanha.fim:"",o.t.required],ativo:[void 0!==this.id?this.campanha.ativo:"S",o.t.required]})}}return t.\u0275fac=function(a){return new(a||t)(b.Ob(l.b),b.Ob(l.c),b.Ob(l.d),b.Ob(o.e),b.Ob(l.f),b.Ob(n.a),b.Ob(n.c))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-campanha"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],["mat-stroked-button","",3,"routerLink"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","0.5%"],["fxFlex.gt-sm","100%"],[1,"full-width"],["matInput","","placeholder","Descri\xe7\xe3o","name","descricao","formControlName","descricao","required",""],[4,"ngIf"],["placeholder","M\xeas de anivers\xe1rio","multiple","","name","meses","formControlName","meses","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex.gt-sm","75%"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","inicio","placeholder","In\xedcio","required",""],["matEndDate","","formControlName","fim","placeholder","Fim","required",""],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","25%"],["placeholder","Ativa","name","ativo","formControlName","ativo","required",""],["disabled",""],["fxLayout","row wrap","fxLayoutGap","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(t,a){1&t&&(b.Bc(0,k,10,4,"div",0),b.hc(1,"async")),2&t&&b.mc("ngIf",b.ic(1,1,a.config$))},directives:[e.l,u.a,n.d,d.a,f.a,f.b,o.u,o.o,o.g,h.c,h.d,h.a,p.c,v.b,o.c,o.n,o.f,o.s,p.g,g.a,e.k,C.a,C.f,C.e,C.d,p.h,C.b,c.m,p.b],pipes:[e.b],styles:[".container[_ngcontent-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}"]}),t})();var j=i("M9IT"),L=i("Dh3D"),A=i("vkgz"),R=i("nYR2"),F=i("jtHE"),q=i("2Vo4");class M{constructor(t){this.campanhaService=t,this.minhasCampanhasSubject=new F.a,this.loadingSubject=new q.a(!1),this.total=0,this.loading$=this.loadingSubject.asObservable()}connect(t){return this.minhasCampanhasSubject.asObservable()}disconnect(t){this.minhasCampanhasSubject.complete(),this.loadingSubject.complete()}carregar(t,a,i,e){this.loadingSubject.next(!0),this.campanhaService.listar(t,a,i+1,e).pipe(Object(R.a)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.total=t.total,this.minhasCampanhasSubject.next(t.data),this.loadingSubject.next(!1)})}}var z=i("+0xr");function G(t,a){1&t&&(b.Ub(0,"th",19),b.Cc(1,"Data"),b.Tb())}function $(t,a){if(1&t&&(b.Ub(0,"td",20),b.Cc(1),b.hc(2,"date"),b.Tb()),2&t){const t=a.$implicit;b.Db(1),b.Dc(b.jc(2,1,t.createdAt,"shortDate"))}}function N(t,a){1&t&&(b.Ub(0,"th",19),b.Cc(1,"Descri\xe7\xe3o"),b.Tb())}function _(t,a){if(1&t&&(b.Ub(0,"td",20),b.Cc(1),b.Tb()),2&t){const t=a.$implicit;b.Db(1),b.Dc(t.descricao)}}function E(t,a){1&t&&(b.Ub(0,"th",21),b.Cc(1,"Meses"),b.Tb())}function V(t,a){if(1&t&&(b.Ub(0,"td",20),b.Cc(1),b.Tb()),2&t){const t=a.$implicit,i=b.gc();b.Db(1),b.Dc(i.visualizarMeses(t.meses))}}function H(t,a){1&t&&(b.Ub(0,"th",21),b.Cc(1,"Per\xedodo"),b.Tb())}function X(t,a){if(1&t&&(b.Ub(0,"td",20),b.Cc(1),b.hc(2,"date"),b.hc(3,"date"),b.Tb()),2&t){const t=a.$implicit;b.Db(1),b.Fc("",b.jc(2,2,t.inicio,"shortDate"),"-",b.jc(3,5,t.fim,"shortDate"),"")}}function J(t,a){1&t&&(b.Ub(0,"th",19),b.Cc(1,"Ativo"),b.Tb())}function K(t,a){if(1&t&&(b.Ub(0,"td",20),b.Cc(1),b.Tb()),2&t){const t=a.$implicit;b.Db(1),b.Dc(t.ativo)}}function Y(t,a){1&t&&b.Pb(0,"th",21)}function Q(t,a){if(1&t){const t=b.Vb();b.Ub(0,"button",23),b.cc("click",function(){b.uc(t);const a=b.gc().$implicit;return b.gc().visualizarCampanha(a.id)}),b.Ub(1,"mat-icon"),b.Cc(2,"visibility"),b.Tb(),b.Tb()}}function W(t,a){if(1&t&&(b.Ub(0,"td",20),b.Bc(1,Q,3,0,"button",22),b.Tb()),2&t){const t=a.$implicit;b.Db(1),b.mc("ngIf",t.id)}}function Z(t,a){1&t&&b.Pb(0,"tr",24)}function tt(t,a){if(1&t){const t=b.Vb();b.Ub(0,"tr",25),b.cc("click",function(){b.uc(t);const i=a.$implicit;return b.gc().visualizarCampanha(i.id)}),b.Tb()}}const at=function(){return["/campanhas/nova"]},it=function(){return[10,25,50]},et=[{path:"",component:(()=>{class t{constructor(t,a,i){this.configService=t,this.campanhaService=a,this.router=i,this.displayedColumns=["createdAt","descricao","meses","periodo","ativo","acoes"]}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.carregarResultados()}),this.paginator.page.pipe(Object(A.a)(()=>this.carregarResultados())).subscribe()}ngOnInit(){this.configService.getConfigList().subscribe(t=>this.config=t),this.dataSource=new M(this.campanhaService),this.dataSource.carregar(this.displayedColumns[0],"asc",0,10)}carregarResultados(){this.dataSource.carregar(this.sort.active,this.sort.direction,this.paginator.pageIndex,this.paginator.pageSize)}visualizarCampanha(t){this.router.navigate(["/campanhas/",t])}visualizarMeses(t){return t.map(t=>t.mes)}}return t.\u0275fac=function(a){return new(a||t)(b.Ob(l.c),b.Ob(l.b),b.Ob(n.c))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-lista-campanha"]],viewQuery:function(t,a){if(1&t&&(b.Gc(j.a,1),b.Gc(L.a,1)),2&t){let t;b.rc(t=b.dc())&&(a.paginator=t.first),b.rc(t=b.dc())&&(a.sort=t.first)}},decls:33,vars:9,consts:[[1,"container"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","0.5%"],["fxFlex.gt-sm","75%"],["fxFlex.gt-sm","25%",2,"text-align","right"],["mat-stroked-button","","color","primary",3,"routerLink"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","createdAt","matSortDirection","asc","matSortDisableClear","",1,"full-width-table",3,"dataSource"],["matColumnDef","createdAt"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descricao"],["matColumnDef","meses"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","periodo"],["matColumnDef","ativo"],["matColumnDef","acoes"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","title","Avaliar recadastramento",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","title","Avaliar recadastramento",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,a){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"h2"),b.Cc(4,"Campanhas"),b.Tb(),b.Tb(),b.Ub(5,"div",3),b.Ub(6,"button",4),b.Cc(7," Adicionar campanha "),b.Ub(8,"mat-icon"),b.Cc(9,"add_circle_outline"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(10,"div",5),b.Ub(11,"table",6),b.Sb(12,7),b.Bc(13,G,2,0,"th",8),b.Bc(14,$,3,4,"td",9),b.Rb(),b.Sb(15,10),b.Bc(16,N,2,0,"th",8),b.Bc(17,_,2,1,"td",9),b.Rb(),b.Sb(18,11),b.Bc(19,E,2,0,"th",12),b.Bc(20,V,2,1,"td",9),b.Rb(),b.Sb(21,13),b.Bc(22,H,2,0,"th",12),b.Bc(23,X,4,8,"td",9),b.Rb(),b.Sb(24,14),b.Bc(25,J,2,0,"th",8),b.Bc(26,K,2,1,"td",9),b.Rb(),b.Sb(27,15),b.Bc(28,Y,1,0,"th",12),b.Bc(29,W,2,1,"td",9),b.Rb(),b.Bc(30,Z,1,0,"tr",16),b.Bc(31,tt,1,0,"tr",17),b.Tb(),b.Pb(32,"mat-paginator",18),b.Tb(),b.Tb()),2&t&&(b.Db(6),b.mc("routerLink",b.oc(7,at)),b.Db(5),b.mc("dataSource",a.dataSource),b.Db(19),b.mc("matHeaderRowDef",a.displayedColumns),b.Db(1),b.mc("matRowDefColumns",a.displayedColumns),b.Db(1),b.mc("length",a.dataSource.total)("pageSize",10)("pageSizeOptions",b.oc(8,it)))},directives:[h.c,h.d,h.a,u.a,n.d,d.a,z.j,L.a,z.c,z.e,z.b,z.g,z.i,j.a,z.d,L.b,z.a,e.l,z.f,z.h],pipes:[e.e],styles:[".container[_ngcontent-%COMP%]{margin:10px}.full-width-table[_ngcontent-%COMP%]{width:100%}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}"]}),t})(),canActivate:[m.a],runGuardsAndResolvers:"always",data:{roles:[s.a.validador]}},{path:"nova",component:P,canActivate:[m.a],runGuardsAndResolvers:"always",data:{roles:[s.a.validador]}},{path:":id",component:P,canActivate:[m.a],runGuardsAndResolvers:"always",data:{roles:[s.a.validador]}}];let rt=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(a){return new(a||t)},imports:[[n.f.forChild(et)],n.f]}),t})();var ct=i("PI13"),ot=i("PCNd");let nt=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(a){return new(a||t)},imports:[[ct.a,e.c,rt,r.a,C.c,c.l,o.r,ot.a]]}),t})()}}]);